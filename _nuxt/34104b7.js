(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{227:function(t,e,n){"use strict";n(228);e.a={methods:{checkNum:function(t){t.quantity=Number(t.quantity),(isNaN(t.quantity)||t.quantity<1)&&(t.quantity=1)}}}},228:function(t,e,n){"use strict";var r=n(8),c=n(3),o=n(79),l=n(17),d=n(10),f=n(32),m=n(165),v=n(58),h=n(6),_=n(80),y=n(59).f,C=n(22).f,N=n(12).f,D=n(229).trim,w=c.Number,I=w.prototype,x="Number"==f(_(I)),k=function(t){var e,n,r,c,o,l,d,code,f=v(t,!1);if("string"==typeof f&&f.length>2)if(43===(e=(f=D(f)).charCodeAt(0))||45===e){if(88===(n=f.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(f.charCodeAt(1)){case 66:case 98:r=2,c=49;break;case 79:case 111:r=8,c=55;break;default:return+f}for(l=(o=f.slice(2)).length,d=0;d<l;d++)if((code=o.charCodeAt(d))<48||code>c)return NaN;return parseInt(o,r)}return+f};if(o("Number",!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var E,$=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof $&&(x?h((function(){I.valueOf.call(n)})):"Number"!=f(n))?m(new w(k(e)),n,$):k(e)},A=r?y(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),M=0;A.length>M;M++)d(w,E=A[M])&&!d($,E)&&N($,E,C(w,E));$.prototype=I,I.constructor=$,l(c,"Number",$)}},229:function(t,e,n){var r=n(14),c="["+n(230)+"]",o=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),d=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(l,"")),n}};t.exports={start:d(1),end:d(2),trim:d(3)}},230:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},235:function(t,e,n){"use strict";n.r(e);n(78);var r={data:function(){return{}},props:{item:Object},methods:{delCart:function(){var t=this,e="".concat("https://course-ec-api.hexschool.io/api/").concat("6b69171f-d486-488a-beaf-ee85eb21fa24","/ec/shopping/").concat(this.item.id);this.$axios.delete(e).then((function(){t.$emit("update")}))}}},c=n(16),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[n("div",{staticClass:"modal",on:{click:function(e){return e.target!==e.currentTarget?null:t.$emit("close")}}},[n("div",{staticClass:"modal-del"},[n("div",{staticClass:"modal-del-header"},[t._v("\n        刪除商品\n      ")]),t._v(" "),n("div",{staticClass:"modal-del-body"},[t._v("\n        是否確認刪除\n        "),n("span",[t._v(t._s(t.item.title))]),t._v("\n        商品(刪除後將無法復原)\n      ")]),t._v(" "),n("div",{staticClass:"modal-del-footer"},[n("button",{attrs:{type:"button"},on:{click:function(e){t.$emit("close"),t.delCart()}}},[t._v("\n          確認刪除\n        ")])])])])])}),[],!1,null,null,null);e.default=component.exports},238:function(t,e,n){"use strict";n.r(e);n(78),n(15),n(40),n(41),n(31);var r=n(5),c=n(227),o={asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.abrupt("return",Promise.all([n.dispatch("getCartData")]));case 2:case"end":return e.stop()}}),e)})))()},data:function(){return{delData:{product:{title:""}},showModal:!1}},components:{delmodel:n(235).default},mixins:[c.a],methods:{getCartData:function(){this.$store.dispatch("getCartData")},updateData:function(t,e){var n="".concat("https://course-ec-api.hexschool.io/api/").concat("6b69171f-d486-488a-beaf-ee85eb21fa24","/ec/shopping");switch(e){case"increment":t.quantity+=1;break;case"reduce":t.quantity-=1}var r={product:t.product.id,quantity:t.quantity};this.$axios.patch(n,r).then((function(){})).catch((function(){}))},showDel:function(t){this.delData=t,this.showModal=!0}},computed:{cartData:function(){return this.$store.state.cartData}}},l=n(16),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"cart"},[n("div",{staticClass:"container"},[n("div",{staticClass:"cart-header"},[n("h2",[t._v("購物車")]),t._v(" "),n("nuxt-link",{attrs:{to:"/products"}},[n("i",{staticClass:"fas fa-angle-left"}),t._v("\n        繼續選購\n      ")])],1),t._v(" "),0===t.cartData.length?n("div",{staticClass:"cart-main"},[n("h3",{staticClass:"cart-main-empty"},[t._v("您的購物車目前是空的")])]):n("div",{staticClass:"cart-main"},[t._l(t.cartData,(function(e){return n("div",{key:e.product.id,staticClass:"cart-main-item"},[n("div",{staticClass:"cart-main-info"},[n("img",{attrs:{src:e.product.imageUrl}}),t._v(" "),n("div",{staticClass:"cart-main-txt"},[n("h4",{staticClass:"item-winery"},[t._v("\n                "+t._s(e.productData.options.winery)+"\n              ")]),t._v(" "),n("h3",{staticClass:"item-title"},[t._v(t._s(e.product.title))]),t._v(" "),n("span",{staticClass:"item-info"},[t._v("\n                "+t._s(e.productData.options.year)+" |\n                "+t._s(e.productData.options.capacity)+" |\n                "+t._s(e.product.category)+"\n              ")])])]),t._v(" "),n("div",{staticClass:"cart-main-quantity"},[n("button",{attrs:{type:"button",disabled:1===e.quantity},on:{click:function(n){return t.updateData(e,"reduce")}}},[t._v("\n              -\n            ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],attrs:{type:"text"},domProps:{value:e.quantity},on:{keyup:function(n){return t.checkNum(e)},change:function(n){return t.updateData(e)},input:function(n){n.target.composing||t.$set(e,"quantity",n.target.value)}}}),t._v(" "),n("button",{attrs:{type:"button"},on:{click:function(n){return t.updateData(e,"increment")}}},[t._v("\n              +\n            ")])]),t._v(" "),n("div",{staticClass:"cart-main-del"},[n("button",{attrs:{type:"button"},on:{click:function(n){return t.showDel(e.productData)}}},[n("i",{staticClass:"fas fa-trash-alt"})])]),t._v(" "),n("span",{staticClass:"cart-main-price"},[t._v("\n            $ "+t._s(t._f("currency")(e.product.price*e.quantity))+"\n          ")])])})),t._v(" "),n("div",{staticClass:"cart-main-confirm"},[n("nuxt-link",{staticClass:"btn",attrs:{to:"cart/cart-form"}},[t._v("確認購物單")])],1),t._v(" "),n("delmodel",{class:{active:t.showModal},attrs:{item:t.delData},on:{close:function(e){t.showModal=!1},update:function(e){return t.getCartData()}}})],2)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Delmodel:n(235).default})}}]);