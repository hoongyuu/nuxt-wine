(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{227:function(t,e,n){"use strict";n(228);e.a={methods:{checkNum:function(t){t.quantity=Number(t.quantity),(isNaN(t.quantity)||t.quantity<1)&&(t.quantity=1)}}}},228:function(t,e,n){"use strict";var r=n(8),o=n(3),c=n(79),f=n(17),l=n(10),d=n(32),h=n(165),v=n(58),m=n(6),_=n(80),y=n(59).f,C=n(22).f,N=n(12).f,w=n(229).trim,I=o.Number,k=I.prototype,x="Number"==d(_(k)),E=function(t){var e,n,r,o,c,f,l,code,d=v(t,!1);if("string"==typeof d&&d.length>2)if(43===(e=(d=w(d)).charCodeAt(0))||45===e){if(88===(n=d.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+d}for(f=(c=d.slice(2)).length,l=0;l<f;l++)if((code=c.charCodeAt(l))<48||code>o)return NaN;return parseInt(c,r)}return+d};if(c("Number",!I(" 0o1")||!I("0b1")||I("+0x1"))){for(var S,D=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof D&&(x?m((function(){k.valueOf.call(n)})):"Number"!=d(n))?h(new I(E(e)),n,D):E(e)},$=r?y(I):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),A=0;$.length>A;A++)l(I,S=$[A])&&!l(D,S)&&N(D,S,C(I,S));D.prototype=k,k.constructor=D,f(o,"Number",D)}},229:function(t,e,n){var r=n(14),o="["+n(230)+"]",c=RegExp("^"+o+o+"*"),f=RegExp(o+o+"*$"),l=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(f,"")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},230:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},231:function(t,e,n){"use strict";n(78);e.a={methods:{addCart:function(t,e){var n=this,r="".concat("https://course-ec-api.hexschool.io/api/").concat("6b69171f-d486-488a-beaf-ee85eb21fa24","/ec/shopping");this.spannerStatus=t.id;var o={product:t.id,quantity:t.quantity};this.$axios.post(r,o).then((function(){"buy"===e?n.$router.push("/cart"):n.$swal.fire({position:"top-end",icon:"success",title:"成功加入購物車",showConfirmButton:!1,timer:1e3}),n.spannerStatus="",n.$store.dispatch("getCartData")})).catch((function(){"buy"===e?(r="".concat("https://course-ec-api.hexschool.io/api/").concat("6b69171f-d486-488a-beaf-ee85eb21fa24","/ec/shopping"),n.$axios.patch(r,o).then((function(){n.$router.push("/cart")})).catch((function(){n.$router.push("/cart")}))):n.$swal.fire({position:"top-end",icon:"error",title:"重複加入購物車",showConfirmButton:!1,timer:1e3}),n.spannerStatus=""}))}}}},232:function(t,e,n){"use strict";n(166),n(43),n(233);e.a={data:function(){return{stareData:[]}},methods:{addStared:function(t){if(t.stared=!t.stared,t.stared)this.stareData.push({title:t.title});else{var e=$.map(this.stareData,(function(t){return t.title})).indexOf(t.title);this.stareData.splice(e,1)}localStorage.setItem("favoriteWine",JSON.stringify(this.stareData))}}}},233:function(t,e,n){"use strict";var r=n(2),o=n(112),c=n(42),f=n(13),l=n(20),d=n(113),h=n(60),v=n(61),m=n(23),_=v("splice"),y=m("splice",{ACCESSORS:!0,0:0,1:2}),C=Math.max,N=Math.min;r({target:"Array",proto:!0,forced:!_||!y},{splice:function(t,e){var n,r,v,m,_,y,w=l(this),I=f(w.length),k=o(t,I),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=I-k):(n=x-2,r=N(C(c(e),0),I-k)),I+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(v=d(w,r),m=0;m<r;m++)(_=k+m)in w&&h(v,m,w[_]);if(v.length=r,n<r){for(m=k;m<I-r;m++)y=m+n,(_=m+r)in w?w[y]=w[_]:delete w[y];for(m=I;m>I-r+n;m--)delete w[m-1]}else if(n>r)for(m=I-r;m>k;m--)y=m+n-1,(_=m+r-1)in w?w[y]=w[_]:delete w[y];for(m=0;m<n;m++)w[m+k]=arguments[m+2];return w.length=I-r+n,v}})},240:function(t,e,n){"use strict";n.r(e);n(26),n(15),n(40),n(27),n(41),n(31);var r=n(5),o=n(231),c=n(227),f={asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.abrupt("return",Promise.all([n.dispatch("getProductsData")]));case 2:case"end":return e.stop()}}),e)})))()},data:function(){return{}},mixins:[n(232).a,o.a,c.a],created:function(){},mounted:function(){this.stareData=JSON.parse(localStorage.getItem("favoriteWine"))||[]},methods:{goDetail:function(t){this.$router.push({path:"/product",query:{wineId:t.id}})},quantity:function(t,e){switch(e){case"incre":t.quantity++;break;default:if(1===t.quantity)return;t.quantity-=1}}},computed:{productsData:function(){return this.$store.state.productsData},data:function(){var t=this,e=[];return this.productsData.forEach((function(n){t.stareData.forEach((function(t){t.title===n.title&&(n.stared=!0,n.quantity=1,e.push(n))}))})),e}}},l=n(16),component=Object(l.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"favorite"},[n("div",{staticClass:"container"},[n("div",{staticClass:"favorite-header"},[n("h2",[t._v("我的收藏")]),t._v(" "),t.data.length>=1?n("span",[t._v(t._s(t.data.length)+"件商品")]):n("span",[t._v("沒有收藏的商品")])]),t._v(" "),0!==t.data.length?n("div",{staticClass:"favorite-main"},t._l(t.data,(function(e){return n("div",{key:e.id,staticClass:"card-wrap",on:{click:function(n){return n.stopPropagation(),t.goDetail(e)}}},[n("div",{staticClass:"card-favorite",on:{click:function(n){return n.stopPropagation(),t.addStared(e)}}},[1==e.stared?n("i",{staticClass:"fas fa-bookmark"}):n("i",{staticClass:"far fa-bookmark"})]),t._v(" "),n("div",{staticClass:"card-img"},[n("img",{attrs:{src:e.imageUrl}})]),t._v(" "),n("div",{staticClass:"card-txt"},[n("h4",{staticClass:"item-winery"},[t._v(t._s(e.options.winery))]),t._v(" "),n("h3",{staticClass:"item-title"},[t._v(t._s(e.title))])]),t._v(" "),n("div",{staticClass:"card-info"},[n("span",{staticClass:"item-info"},[t._v("\n            "+t._s(e.options.year)+" | "+t._s(e.options.capacity)+" |\n            "+t._s(e.category)+"\n          ")])]),t._v(" "),n("div",{staticClass:"card-box"},[n("div",{staticClass:"card-price"},[n("span",{staticClass:"sale-price"},[t._v("$ "+t._s(t._f("currency")(e.price)))]),t._v(" "),n("span",{staticClass:"price"},[t._v("$ "+t._s(t._f("currency")(e.origin_price)))])]),t._v(" "),n("div",{staticClass:"card-quantity"},[n("button",{attrs:{type:"button"},on:{click:function(n){return n.stopPropagation(),t.quantity(e,"reduce")}}},[n("i",{staticClass:"fas fa-minus"})]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],attrs:{type:"text"},domProps:{value:e.quantity},on:{keyup:function(n){return t.checkNum(e)},click:function(t){t.stopPropagation()},input:function(n){n.target.composing||t.$set(e,"quantity",n.target.value)}}}),t._v(" "),n("button",{attrs:{type:"button"},on:{click:function(n){return n.stopPropagation(),t.quantity(e,"incre")}}},[n("i",{staticClass:"fas fa-plus"})])])]),t._v(" "),n("div",{staticClass:"card-btn"},[n("a",{staticClass:"btn",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),t.addCart(e)}}},[t._v("\n            加入購物車\n          ")])])])})),0):n("div",{staticClass:"favorite-main"},[n("h3",{staticClass:"favorite-main-empty"},[t._v("您的收藏列表目前是空的")])])])])}),[],!1,null,null,null);e.default=component.exports}}]);